<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monitoring</title>
    <link rel="stylesheet" href="src/mdb.min.css" />
    <link rel="stylesheet" href="src/bootstrap.min.css" />
    <link rel="stylesheet" href="styling/style.css" />
    <link rel="stylesheet" href="styling/pulse.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css"
      rel="stylesheet"
    />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      .card1 {
        border: 0px solid #11531e;
      }
      /* Drop Down Icon */
      .dropdown-iconbtn {
        background-color: #11531e;
        color: #fff;
      }
      .dropdown-iconbtn:hover {
        border: solid 2px #11531e;
        color: #11531e;
        background-color: transparent;
      }
      .dropdown-toggle::after {
        display: none;
      }

      /* Make dropdown menu items floating */
      .dropdown-menu {
        position: absolute;
        right: 0;
        left: auto;
      }
      .content {
        margin-left: 70px;
        /* Same as the width of the sidebar */
        padding: 16px;
      }

      /* Add this style for better table appearance */
      table {
        border: none;
        border-collapse: collapse;
        width: 100%;
        margin-top: 20px;
      }

      td {
        border: solid #e4e4e4 1px;
        padding: 8px;
        text-align: center;
      }

      th {
        border: none;
        background-color: #e4e4e4;
        padding: 8px;
        text-align: center;
      }

      .notification-box {
        z-index: 1;
        display: none;
        position: absolute;
        top: 50px;
        right: 100px;
        padding: 10px;
        background-color: #fff;
        border: 1px solid #ccc;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      /* Modal styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 1050;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgb(0, 0, 0);
        background-color: rgba(0, 0, 0, 0.4);
      }

      .modal-content {
        background-color: #fefefe;

        margin-bottom: 15%;
        padding: 20px;
        border: 1px solid #888;
      }

      .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
      }

      .close:hover,
      .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
      }
      .header-color {
        color: #11531e;
      }
    </style>
  </head>

  <body id="body-pd">
    <div class="l-navbar header" id="nav-bar">
      <nav class="nav1">
        <div class="header_toggle">
          <a href="#" class="nav_logo">
            <img src="../img/GaboV1_LOGO.png" class="nav_logo-icon" />
            <span class="nav_logo-name">Monitoring Center</span>
          </a>
          <div class="nav_list">
            <a href="#" class="nav_link active1" id="welcome-link">
              <i class="bx bx-home-alt-2 nav_icon"></i>
              <span class="nav_name">Home</span>
            </a>
            <a href="#" class="nav_link" id="map-link">
              <i class="bx bx-map-alt nav_icon"></i>
              <span class="nav_name">Map</span>
            </a>
            <a href="#" class="nav_link" id="reports-link">
              <i class="bx bx-message-square-detail nav_icon"></i>
              <span class="nav_name">Tickets</span>
            </a>
            <a href="#" class="nav_link" id="collectors-link">
              <i class="bx bx-hard-hat nav_icon"></i>
              <span class="nav_name">Collectors</span>
            </a>
            <a href="#" class="nav_link" id="bins-link">
              <i class="bx bxs-trash nav_icon"></i>
              <span class="nav_name">Bins</span>
            </a>
            <a href="#" class="nav_link" id="stats-link">
              <i class="bx bx-bar-chart-alt-2 nav_icon"></i>
              <span class="nav_name">Summary</span>
            </a>
          </div>
        </div>
        <a href="#" class="nav_link" id="signOut">
          <i class="bx bx-log-out nav_icon"></i>
          <span class="nav_name">SIGN OUT</span>
        </a>
      </nav>
    </div>
    <!-- NAVBAR -->

    <!-- Container Main start -->
    <div class="content" id="welcome-content">
      <!--<div class="container-fluid bg-dark p-3 rounded-4">
       <div class="d-flex container flex-row-reverse">
          <i class="fas fa-user-check text-white"></i>
        </div> 
      </div>-->
      <div class="container">
        <nav
          class="navbar navbar-light bg-light shadow-none bg-transparent mb-4"
        >
          <div class="container-fluid">
            <div class="col-md-3">
              <a class="navbar-brand header-color fs-5 fw-bolder" href="#">
                Monitoring Center
              </a>
            </div>

            <div class="col-md-auto d-flex">
              <!-- <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            /> 
            -->
              <!-- Notification Button -->
              <div class="dropdown">
                <button
                  class="btn dropdown-toggle dropdown-iconbtn shadow-none"
                  type="button"
                  id="notificationDropdown"
                  data-toggle="dropdown"
                  aria-expanded="false"
                >
                  <i class="fas fa-bell"></i>
                </button>
                <ul
                  class="dropdown-menu dropdown-menu-end mt-3 p-4 shadow-none border-0"
                  aria-labelledby="notificationDropdown"
                >
                  <!-- Notification 1 -->
                  <li>
                    <div class="card shadow-none border-0" style="width: 300px">
                      <!-- Set width here -->
                      <div class="card-body">
                        <div class="row">
                          <div class="col-auto">
                            <!-- Icon -->
                            <i class="fas fa-envelope"></i>
                          </div>
                          <div class="col">
                            <!-- Title -->
                            <h5 class="card-title">New Message</h5>
                            <!-- Message -->
                            <p class="card-text">
                              You have a new message from John Doe.
                            </p>
                            <!-- Time -->
                            <p class="card-text">
                              <small class="text-muted">1 minute ago</small>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </li>
                  <!-- Notification 2 -->
                  <li>
                    <div class="card shadow-none border-0" style="width: 300px">
                      <!-- Set width here -->
                      <div class="card-body">
                        <div class="row">
                          <div class="col-auto">
                            <!-- Icon -->
                            <i class="fas fa-bell"></i>
                          </div>
                          <div class="col">
                            <!-- Title -->
                            <h5 class="card-title">New Notification</h5>
                            <!-- Message -->
                            <p class="card-text">
                              You have a new notification.
                            </p>
                            <!-- Time -->
                            <p class="card-text">
                              <small class="text-muted">2 hours ago</small>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </li>
                  <!-- Add more notifications as needed -->
                </ul>
              </div>
            </div>
          </div>
        </nav>
      </div>

      <!-- <div class="container-fluid">
        <div class="row justify-content-start">
          <div class="col-md-12 text-center">
            <div class="card shadow-none border-0 bg-gradient-1">
              <div class="card-body">
                <h1 id="welcome-message">Welcome,</h1>
              </div>
            </div>
          </div>
        </div>
      </div> -->
      <div class="container">
        <div class="container">
          <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
              <button
                class="nav-link active fw-bold"
                id="pills-home-tab"
                data-mdb-toggle="pill"
                data-mdb-target="#pills-home"
                type="button"
                role="tab"
                aria-controls="pills-home"
                aria-selected="true"
              >
                <i class="fas fa-chart-line me-2"></i> Overview
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link fw-bold"
                id="pills-profile-tab"
                data-mdb-toggle="pill"
                data-mdb-target="#pills-profile"
                type="button"
                role="tab"
                aria-controls="pills-profile"
                aria-selected="false"
              >
                <i class="fas fa-calendar-alt me-2"></i> Scheduling
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link fw-bold"
                id="pills-contact-tab"
                data-mdb-toggle="pill"
                data-mdb-target="#pills-contact"
                type="button"
                role="tab"
                aria-controls="pills-contact"
                aria-selected="false"
              >
                <i class="fas fa-calendar-check me-2"></i> Schedules
              </button>
            </li>
          </ul>
        </div>

        <div class="tab-content" id="pills-tabContent">
          <div
            class="tab-pane fade show active container-fluid"
            id="pills-home"
            role="tabpanel"
            aria-labelledby="pills-home-tab"
          >
            <div class="row">
              <div class="col-9">
                <!-- Cards -->
                <div class="card shadow-none rounded-4 card1">
                  <div class="card-body text-center">
                    <div class="container">
                      <div class="row justify-content-between">
                        <div class="col-3 col-sm-6">
                          <a
                            href="#"
                            class="nav-card nav-link"
                            id="collectors-card"
                          >
                            <div class="card shadow-none p-1 border-0">
                              <div class="card-body">
                                <div class="row">
                                  <div class="col-5">
                                    <p
                                      class="fs-1 text-success fw-bold"
                                      id="uidCount"
                                    ></p>
                                  </div>
                                  <div class="col">
                                    <p class="fs-5 text-muted">
                                      Garbage Collectors
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                        <div class="col-3 col-sm-6">
                          <a
                            href="collectorsCrud/CollectorList.html"
                            class="card-link"
                          >
                            <div class="card shadow-none p-1 border-0">
                              <div class="card-body">
                                <div class="row">
                                  <div class="col-5">
                                    <p class="fs-1 text-success fw-bold">50</p>
                                  </div>
                                  <div class="col">
                                    <p class="fs-5 text-muted">
                                      Household Users
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                        <div class="col-3 col-sm-6">
                          <div class="card shadow-none p-1 border-0">
                            <div class="card shadow-none p-1 border-0">
                              <div class="card-body">
                                <div class="row">
                                  <div class="col-5">
                                    <p
                                      class="fs-1 text-success fw-bold"
                                      id="gbCount"
                                    ></p>
                                  </div>
                                  <div class="col">
                                    <p class="fs-5 text-muted">
                                      Smart Garbage Bins
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Cards -->
              </div>
              <div class="col-3">
                <div class="container">
                  <div class="row">
                    <div
                      class="card rounded-4 shadow-none border-0 position-relative p-2"
                    >
                      <div class="row mt-1 p-3">
                        <div class="col-9">
                          <p class="fs-3 fw-bold text-muted">
                            Total Garbage Collected
                          </p>
                        </div>
                        <div class="col-2">
                          <button
                            type="button"
                            class="btn bg-transparent shadow-none btn-sm m-2 text-muted"
                            style="text-transform: none"
                          >
                            <i class="fas fa-2x fa-chevron-right"></i>
                          </button>
                        </div>
                      </div>
                      <!-- See More Button -->

                      <div class="row text-start text-center">
                        <p class="fs-1 fw-bolder text-success">50 TONS</p>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-4">
                    <div class="card shadow-none border-0 bg-success">
                      <div class="card-body text-center"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="container mt-5">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="card shadow-none border-0">
                        <div class="card-header">
                          <h1>Collections</h1>
                        </div>
                        <div class="card-body"></div>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div
                        class="card shadow-none border-0 text-start bg-transparent"
                      >
                        <div class="card-body">
                          <p class="fs-4 fw-bold">Activities</p>
                        </div>
                      </div>
                      <div class="card p-2 card-activity shadow-none border-0">
                        <div
                          class="card-body"
                          style="height: 250px; overflow-y: auto"
                        >
                          <div class="container top-0">
                            <div
                              class="card rounded-5 border-0 p-3 shadow-none position-relative"
                            >
                              <div class="d-flex align-items-center">
                                <div class="bg-secondary rounded-4 p-3 me-3">
                                  <i
                                    class="fas fa-calendar-alt fa-2x text-light"
                                  ></i>
                                </div>
                                <div>
                                  <p class="fw-bold fs-6 mb-0">
                                    Scheduled for collection
                                  </p>
                                  <p class="fw-light text-muted mb-0">
                                    GCL 002 has set to collect on Barangay 178.
                                  </p>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="container top-0">
                            <div
                              class="card rounded-5 border-0 p-3 shadow-none position-relative"
                            >
                              <div class="d-flex align-items-center">
                                <div class="bg-secondary rounded-4 p-3 me-3">
                                  <i
                                    class="fas fa-calendar-alt fa-2x text-light"
                                  ></i>
                                </div>
                                <div>
                                  <p class="fw-bold fs-6 mb-0">
                                    Scheduled for collection
                                  </p>
                                  <p class="fw-light text-muted mb-0">
                                    GCL 002 has set to collect on Barangay 178.
                                  </p>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="container top-0">
                            <div
                              class="card rounded-5 border-0 p-3 shadow-none position-relative"
                            >
                              <div class="d-flex align-items-center">
                                <div class="bg-secondary rounded-4 p-3 me-3">
                                  <i
                                    class="fas fa-calendar-alt fa-2x text-light"
                                  ></i>
                                </div>
                                <div>
                                  <p class="fw-bold fs-6 mb-0">
                                    Scheduled for collection
                                  </p>
                                  <p class="fw-light text-muted mb-0">
                                    GCL 002 has set to collect on Barangay 178.
                                  </p>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="tab-pane fade"
            id="pills-profile"
            role="tabpanel"
            aria-labelledby="pills-profile-tab"
          >
            <div class="container">
              <div class="row">
                <div class="col">
                  <!-- The container for the map -->
                  <div class="card shadow-none">
                    <div id="map" style="height: 300px; width: 100%"></div>
                    <!--<div id="map" style="height: 280px"></div> -->
                  </div>
                </div>
                <div class="col-4">
                  <div class="card p-4 shadow-none border-0">
                    <div class="container">
                      <div class="md-form">
                        <label class="form-label" for="districtSelect"
                          >District</label
                        >
                        <select class="form-select" id="district">
                          <option value="" disabled selected>
                            Select District
                          </option>
                          <option value="1">District 1</option>
                          <option value="2">District 2</option>
                          <option value="3">District 3</option>
                        </select>
                      </div>
                      <div class="md-form mt-2">
                        <label class="form-label" for="barangaySelect"
                          >Barangay</label
                        >
                        <select class="form-select" id="barangay" disabled>
                          <option value="" disabled selected>
                            Select Barangay
                          </option>
                        </select>
                      </div>
                      <div class="md-form mt-4 text-center">
                        <button
                          class="btn btn-primary shadow-none"
                          id="selectButton"
                          disabled
                        >
                          Select
                        </button>
                        <button
                          class="btn btn-danger shadow-none"
                          id="cancelButton"
                          disabled
                        >
                          Cancel
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-5">
                <div class="col">
                  <p class="fs-3 fw-bold text-muted">Collection Details</p>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col">
                  <div class="card rounded-4 border-0 p-5 shadow-none">
                    <div class="container">
                      <div id="selectedMarkers"></div>
                    </div>
                    <div
                      class="container"
                      id="additionalFields"
                      style="display: none"
                    >
                      <div class="row">
                        <div class="col">
                          <label for="dropdown" class="form-label"
                            >Available Collector:</label
                          >
                          <select
                            id="dropdownCollector"
                            name="dropdown"
                            class="form-select"
                          >
                            <option value="" selected disabled>
                              Select Collector
                            </option>
                            <!-- Add options for available collectors here -->
                          </select>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col">
                          <label for="date" class="form-label"
                            >Select Date:</label
                          >
                          <input
                            type="date"
                            id="dateInputField"
                            name="date"
                            class="form-control"
                            required
                          />
                        </div>
                        <div class="col">
                          <label for="time" class="form-label"
                            >Select Time:</label
                          >
                          <div class="position-relative">
                            <select
                              id="timeInputField"
                              class="mdb-select form-control"
                            >
                              <option value="" disabled selected>
                                Select Time
                              </option>
                              <!-- Add your time range options here -->

                              <!-- Add more options as needed -->
                            </select>
                            <i
                              class="fa-regular fa-clock icon-select position-absolute"
                              style="top: 10px; right: 10px"
                            ></i>
                          </div>
                        </div>
                      </div>

                      <div class="row text-center">
                        <div class="col-12">
                          <button
                            id="deployBtn"
                            class="btn btn-primary shadow-none mt-3"
                            disabled
                          >
                            <i class="fas fa-calendar-plus"></i> Schedule
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="tab-pane fade"
            id="pills-contact"
            role="tabpanel"
            aria-labelledby="pills-contact-tab"
          ></div>
        </div>
      </div>
    </div>

    <div class="content" id="map-content">
      <!-- The container for the map -->
      <div class="container mt-5">
        <p class="fs-2 fw-bold text-muted">Monitoring Map</p>
      </div>

      <div class="container mt-5">
        <!-- Geospatial Visualization-->
        <div class="row">
          <div class="col-md-9">
            <div class="card shadow-none border-0">
              <div id="roadmap" style="height: 430px"></div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card shadow-none border-0" style="height: 430px">
              <div class="card-body">
                <div class="row mb-3">
                  <div class="col-md-6">
                    <p class="fs-5 fw-bolder text-muted">
                      High - Traffic Collection Zones
                    </p>
                  </div>
                  <div class="col-md-6 justify-content-end text-end">
                    <a
                      type="button"
                      class="bg-transparent shadow-none btn-sm fw-bold text-muted"
                      data-mdb-toggle="modal"
                      data-mdb-target="#reportModal"
                    >
                      <span>See More</span>
                      <span class="icon"
                        ><i class="fas fa-chevron-right"></i
                      ></span>
                    </a>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <p class="fw-bold">Brgy. 176</p>
                  </div>
                  <div class="col-md-6">
                    <div class="progress">
                      <div
                        class="progress-bar bg-danger"
                        role="progressbar"
                        style="width: 80%"
                        aria-valuenow="10"
                        aria-valuemin="0"
                        aria-valuemax="100"
                      ></div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <p class="fw-bold">Brgy. 1</p>
                  </div>
                  <div class="col-md-6">
                    <div class="progress">
                      <div
                        class="progress-bar bg-danger"
                        role="progressbar"
                        style="width: 80%"
                        aria-valuenow="10"
                        aria-valuemin="0"
                        aria-valuemax="100"
                      ></div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <p class="fw-bold">Brgy. 175</p>
                  </div>
                  <div class="col-md-6">
                    <div class="progress">
                      <div
                        class="progress-bar bg-danger"
                        role="progressbar"
                        style="width: 80%"
                        aria-valuenow="10"
                        aria-valuemin="0"
                        aria-valuemax="100"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- 
              <div class="row">
                <div class="col">
                  <p class="fs-5 text-muted fw-bold">Marker Legends</p>
                </div>
              </div>
              <div class="container top-0">
                <div
                  class="card rounded-5 border-0 p-3 shadow-none position-relative"
                >
                  <div class="d-flex align-items-center">
                    <div class="bg-info rounded-4 p-3 me-3">
                      <i class="fas fa-map-marker-alt fa-2x text-light"></i>
                    </div>
                    <div>
                      <p class="fw-bold fs-6 mb-0">Collector Marker</p>
                      <p class="fw-light text-muted mb-0">
                        Represents the location of garbage collectors.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="container top-0 mt-3">
                <div
                  class="card rounded-5 border-0 p-3 shadow-none position-relative"
                >
                  <div class="d-flex align-items-center">
                    <div class="bg-primary rounded-4 p-3 me-3">
                      <i class="fas fa-trash fa-2x text-light"></i>
                    </div>
                    <div>
                      <p class="fw-bold fs-6 mb-0">Bin Marker</p>
                      <p class="fw-light text-muted mb-0">
                        Represents the location of garbage bins.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              -->
          </div>
        </div>
      </div>
      <div class="container mt-4">
        <div class="row">
          <div class="col-4"></div>
          <div class="col-4"></div>
        </div>
      </div>
      <div class="container">
        <div class="row">
          <div class="col"></div>
        </div>
      </div>
      <div class="container mt-5">
        <div class="row">
          <div class="col-md-12">
            <div class="card shadow-none border-0">
              <div class="card-body">
                <h1 class="header-color fw-bold p-1">
                  Waste Composition Summary
                </h1>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container mt-4">
        <div class="row">
          <div class="col-md-12">
            <p class="fw-bolder fs-4 text-muted">Total Garbage Collected</p>
          </div>
        </div>
        <div class="row">
          <div class="col-md-3">
            <div class="dropdown">
              <select
                class="form-select"
                id="timePeriodDropdown"
                onchange="updateLineChart(this.value)"
              >
                <option value="today">Today</option>
                <option value="last_week">Last Week</option>
                <option value="last_month">Last Month</option>
                <!-- Add more time period options as needed -->
              </select>
            </div>
          </div>
        </div>
        <div class="row mt-4">
          <div class="col-md-12">
            <canvas id="lineChart"></canvas>
          </div>
        </div>
      </div>

      <div class="container mt-5">
        <div class="row"></div>
      </div>
      <div class="container mt-5"></div>
    </div>

    <div class="content" id="reports-content">
      <div class="container mt-5">
        <p class="fs-2 fw-bold">Tickets</p>
      </div>
      <div class="container mb-5">
        <div class="row justify-content-end">
          <div class="col-md-3">
            <div class="input-group">
              <div class="form-outline" data-mdb-input-init>
                <input type="search" id="searchInput" class="form-control" />
                <label class="form-label" for="searchInput">Search</label>
              </div>
            </div>
          </div>
          <div class="col-md-3 d-flex">
            <div class="input-group">
              <div class="input-group-prepend">
                <label class="input-group-text" for="sortDropdown"
                  >Filter By:
                </label>
              </div>
              <select
                class="custom-select form-control form-outline"
                id="sortDropdown"
              >
                <option selected disabled>Select an option</option>
                <option value="ticketNumber">Ticket #</option>
                <option value="GCN">GCN</option>
                <option value="Issue">Issue</option>
                <option value="district">District</option>
                <option value="barangay">Barangay</option>
                <option value="TimeSent">Time Sent</option>
                <option value="DateSent">Date Sent</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12">
            <div id="reportsTable"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="content" id="bins-content">
      <h1>Bins</h1>
    </div>
    <div class="content" id="collector-content">
      <div class="container mb-5 mt-5">
        <div class="row">
          <div class="col-md-6">
            <h2>Collectors</h2>
          </div>
          <div class="col-md-6 d-flex justify-content-end">
            <button
              class="btn btn-primary shadow-none"
              id="AddUserButton"
              data-mdb-toggle="modal"
              data-mdb-target="#addCollectorModal"
            >
              Add Collector
            </button>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row justify-content-end">
          <div class="col-md-3">
            <!-- Search bar -->
            <div class="input-group mb-3">
              <input
                type="text"
                id="searchCollector"
                class="form-control"
                placeholder="Search..."
                aria-label="Search"
                aria-describedby="searchButton"
              />
            </div>
          </div>
          <div class="col-md-3">
            <!-- Dropdown for search category -->
            <div class="input-group mb-3">
              <select
                class="form-select"
                id="searchCategory"
                aria-label="Search Category"
              >
                <option selected>Select category...</option>
                <option value="firstName">First Name</option>
                <option value="lastName">Last Name</option>
                <option value="email">Email</option>
                <option value="mobileNumber">Mobile Number</option>
                <option value="district">District</option>
                <option value="barangay">Barangay</option>
                <option value="suffix">Suffix</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div class="container mt-3">
        <table id="collectorsTable" class="table table-striped">
          <thead class="table-dark">
            <tr>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Email</th>
              <th>Mobile Number</th>
              <th>District</th>
              <th>Barangay</th>
              <th>Suffix</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <!-- Table body will be populated dynamically -->
          </tbody>
        </table>
      </div>
    </div>
    <div class="content" id="stats-content"></div>

    <div
      class="modal fade"
      id="modal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Report Details</h5>
            <button
              type="button"
              class="btn-close"
              data-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" id="modalContent">
            <!-- Modal content will be dynamically generated here -->
          </div>
        </div>
      </div>
    </div>
    <div
      class="modal fade"
      id="addCollectorModal"
      tabindex="-1"
      aria-labelledby="addCollectorModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addCollectorModalLabel">
              <i class="fas fa-user-plus"></i> ADD COLLECTOR
            </h5>
            <button
              type="button"
              class="btn-close"
              data-mdb-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="container">
              <form id="viewForm" class="needs-validation">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <div class="form-outline" data-mdb-input-init>
                      <input
                        type="text"
                        id="fName"
                        class="form-control"
                        required
                      />
                      <label class="form-label" for="fName">First Name</label>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <div class="form-outline" data-mdb-input-init>
                      <input type="text" id="mName" class="form-control" />
                      <label class="form-label" for="mName">Middle Name</label>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <div class="form-outline" data-mdb-input-init>
                      <input
                        type="text"
                        id="lName"
                        class="form-control"
                        required
                      />
                      <label class="form-label" for="lName">Last Name</label>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <div class="form-outline" data-mdb-input-init>
                      <input type="text" id="sFix" class="form-control" />
                      <label class="form-label" for="sFix">Suffix</label>
                    </div>
                  </div>
                </div>
                <div class="form-outline mb-3" data-mdb-input-init>
                  <input
                    type="email"
                    id="eMail"
                    class="form-control"
                    required
                  />
                  <label class="form-label" for="eMail">Email Address</label>
                </div>
                <div class="input-group">
                  <span class="input-group-text" id="basic-addon1">+63</span>
                  <input
                    type="text"
                    id="mobileNumber1"
                    class="form-control"
                    placeholder="Mobile Number"
                    aria-label="Mobile Number"
                    aria-describedby="basic-addon1"
                  />
                </div>
                <div class="row mb-5">
                  <div class="col-md-6 mb-3">
                    <div class="form-outline" data-mdb-input-init>
                      <label for="districtDropdown"></label>
                      <select
                        class="form-select"
                        id="districtDropdown"
                        required
                      >
                        <option selected disabled>Select District</option>
                        <option value="1">District 1</option>
                        <option value="2">District 2</option>
                        <option value="3">District 3</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <div class="form-outline" data-mdb-input-init>
                      <label for="barangayDropdown"></label>
                      <select
                        class="form-select"
                        id="barangayDropdown"
                        required
                      >
                        <option selected disabled>Select Barangay</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-12 d-flex">
                  <input
                    type="submit"
                    id="submitBtn"
                    class="btn btn-primary shadow-none"
                    value="Submit"
                    data-mdb-ripple-init
                  />
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- HTML for modal using MDBootstrap -->
    <div
      class="modal fade"
      id="viewCollectorModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="viewCollectorModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="viewCollectorModalLabel">
              Collector Details
            </h5>
            <button
              type="button"
              class="btn close shadow-none"
              data-mdb-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" id="viewCollectorDetails"></div>
        </div>
      </div>
    </div>
    <div
      class="modal fade"
      id="reportModal"
      tabindex="-1"
      aria-labelledby="reportModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="reportModalLabel">
              High Traffic Collection Zones
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <!-- Insert your report content here -->
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-mdb-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"
    ></script>
    <script type="module" src="monitor-index-reports.js"></script>
    <script type="module" src="monitoring-gb-account-count.js"></script>

    <script type="text/javascript" src="../src/jquery.min.js"></script>
    <script type="text/javascript" src="../src/bootstrap.min.js"></script>
    <script type="text/javascript" src="../src/popper.min.js"></script>
    <script src="map.js" type="module" defer></script>
    <script type="text/javascript" src="mapIndex.js"></script>
    <script type="text/javascript" src="components/lineChart.js"></script>
    <script type="text/javascript" src="components/session.js"></script>
    <script type="text/javascript" src="components/dropDown.js"></script>
    <script type="text/javascript" src="monitoring.js"></script>

    <!-- <script
      defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAL_60Vbd3sqYKIErZ_PoxTZEsPNU_v0lY&callback=initMap"
    ></script> -->
    <script
      defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAL_60Vbd3sqYKIErZ_PoxTZEsPNU_v0lY&callback=initMaps"
    ></script>

    <script>
      function toggleInputs() {
        var inputs = document.querySelectorAll(
          'input[type="text"], input[type="email"], input[type="tel"], input[type="password"]'
        );
        inputs.forEach(function (input) {
          input.disabled = !input.disabled;
        });
      }

      // Get the time select element
      const timeSelect = document.getElementById("timeInputField");

      // Function to generate time options with prefix
      function generateTimeOptions() {
        const startTime = 8; // Start time in 24-hour format
        const endTime = 17; // End time in 24-hour format

        // Loop to generate time ranges with prefix
        for (let hour = startTime; hour <= endTime; hour++) {
          const time12hr = hour % 12 || 12; // Convert to 12-hour format
          const suffix = hour < 12 ? "AM" : "PM"; // Determine AM/PM suffix
          const timeRange = `${time12hr}:00 ${suffix} - ${
            (time12hr + 1) % 12 || 12
          }:00 ${suffix}`;

          // Create an option element
          const option = document.createElement("option");
          option.value = timeRange; // Set value
          option.textContent = timeRange; // Set display text
          timeSelect.appendChild(option); // Append option to select element
        }

        // Initialize MDB select component
        mdbSelect.init(timeSelect);
      }

      // Call the function to generate time options
      generateTimeOptions();

      // Global variable to store original option colors
      const originalOptionColors = {};

      // Function to reset options to their original state
      function resetOptions() {
        const dropdownCollector = document.getElementById("dropdownCollector");
        const options = dropdownCollector.options;
        for (let i = 0; i < options.length; i++) {
          options[i].disabled = false;
          if (originalOptionColors[options[i].value]) {
            options[i].style.color = originalOptionColors[options[i].value];
          }
        }
      }

      // Function to check collector availability based on selected time
      function checkCollectorAvailability(selectedTime, collectorUID) {
        // Assuming you have Firebase initialized and authenticated already
        const dbRef = firebase
          .database()
          .ref(`Accounts/Collectors/${collectorUID}/AssignedSchedule`);

        // Fetch the schedule data for the selected collector
        dbRef.once("value", (snapshot) => {
          const schedule = snapshot.val();

          // Check if the collector has any assigned schedule
          if (schedule) {
            let isAvailable = false; // Flag to check if any schedule matches the selected time
            // Iterate through the assigned schedule to check for time conflicts
            Object.values(schedule).forEach((assignment) => {
              const timeInput = assignment.TimeInput;
              // Check if the selected time matches any of the collector's assigned schedules
              if (timeInput === selectedTime) {
                isAvailable = true;
                return; // Exit the loop if a match is found
              }
            });

            // If the selected time is not available for the collector, revert the selection
            if (!isAvailable) {
              resetOptions();
            } else {
              // If there's a match, disable the collector option and mark it as unavailable
              const dropdownCollector =
                document.getElementById("dropdownCollector");
              const options = dropdownCollector.options;
              for (let i = 0; i < options.length; i++) {
                if (options[i].value === collectorUID) {
                  options[i].disabled = true;
                  originalOptionColors[collectorUID] = options[i].style.color; // Store original color
                  options[i].style.color = "green"; // Change color to green to indicate availability
                  break;
                }
              }
            }
          } else {
            // If there's no schedule for the collector, reset the options
            resetOptions();
          }
        });
      }

      // Event listener for when a time is selected
      document
        .getElementById("timeInputField")
        .addEventListener("change", (event) => {
          const selectedTime = event.target.value;
          const selectedCollectorUID =
            document.getElementById("dropdownCollector").value;

          // Check availability for the selected time and collector
          if (selectedTime && selectedCollectorUID) {
            checkCollectorAvailability(selectedTime, selectedCollectorUID);
          }
        });
    </script>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  </body>
</html>
